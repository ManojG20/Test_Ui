<script type="text/javascript" src="js/libs/pageSetup.js"></script>
<section id="widget-grid" class="">
	<div class="row">
		<article class="col-sm-12 col-md-12 col-lg-8">

			<!-- new widget -->
			<div class="jarviswidget" id="wid-id-6">

				<!-- widget options:
				usage: <div class="jarviswidget" id="wid-id-100" data-widget-editbutton="false">

				data-widget-colorbutton="false"
				data-widget-editbutton="false"
				data-widget-togglebutton="false"
				data-widget-deletebutton="false"
				data-widget-fullscreenbutton="false"
				data-widget-custombutton="false"
				data-widget-collapsed="true"
				data-widget-sortable="false"

				-->

				<header>
					<span class="widget-icon"> <i class="fa fa-cube"></i> </span>
					<h2>Alerts by Count</h2>
					<div class="widget-toolbar hidden-mobile">
						<span><i class="fa fa-location-arrow"></i> Reset</span>
					</div>
				</header>
				
				<div class="jarviswidget-editbox">
					<div>
						<label>Title:</label>
							<input type="text" />
					</div>
				</div>
				<div class="widget-body">
					<div id="Alerts-Line" class = "dc-chart">
					</div>
				</div>


			</div>
		</article>
		<article class="col-sm-12 col-md-12 col-lg-4">

			<!-- new widget -->
			<div class="jarviswidget" id="wid-id-104">

				<!-- widget options:
				usage: <div class="jarviswidget" id="wid-id-100" data-widget-editbutton="false">

				data-widget-colorbutton="false"
				data-widget-editbutton="false"
				data-widget-togglebutton="false"
				data-widget-deletebutton="false"
				data-widget-fullscreenbutton="false"
				data-widget-custombutton="false"
				data-widget-collapsed="true"
				data-widget-sortable="false"

				-->

				<header>
					<span class="widget-icon"> <i class="fa fa-cube"></i> </span>
					<h2>Alerts by Category</h2>
					<div class="widget-toolbar hidden-mobile">
					</div>
				</header>
				
				<div class="jarviswidget-editbox">
					<div>
						<label>Title:</label>
							<input type="text" />
					</div>
				</div>
				<div class="widget-body">
					<div id="Alerts-Level-Pi" class = "dc-chart">
					</div>
				</div>


			</div>
		</article>
		<article class="col-sm-12 col-md-12 col-lg-4">

			<!-- new widget -->
			<div class="jarviswidget" id="wid-id-105">

				<!-- widget options:
				usage: <div class="jarviswidget" id="wid-id-100" data-widget-editbutton="false">

				data-widget-colorbutton="false"
				data-widget-editbutton="false"
				data-widget-togglebutton="false"
				data-widget-deletebutton="false"
				data-widget-fullscreenbutton="false"
				data-widget-custombutton="false"
				data-widget-collapsed="true"
				data-widget-sortable="false"

				-->

				<header>
					<span class="widget-icon"> <i class="fa fa-cube"></i> </span>
					<h2>Alerts by Type</h2>
					<div class="widget-toolbar hidden-mobile">
					</div>
				</header>
				
				<div class="jarviswidget-editbox">
					<div>
						<label>Title:</label>
							<input type="text" />
					</div>
				</div>
				<div class="widget-body">
					<div id="Alerts-Type-Pi" class = "dc-chart">
					</div>
				</div>


			</div>
		</article>
	</div>
	<div class="row">
		<article class="col-sm-12 col-md-12 col-lg-6">

			<!-- new widget -->
			<div class="jarviswidget" id="wid-id-106">

				<!-- widget options:
				usage: <div class="jarviswidget" id="wid-id-100" data-widget-editbutton="false">

				data-widget-colorbutton="false"
				data-widget-editbutton="false"
				data-widget-togglebutton="false"
				data-widget-deletebutton="false"
				data-widget-fullscreenbutton="false"
				data-widget-custombutton="false"
				data-widget-collapsed="true"
				data-widget-sortable="false"

				-->

				<header>
					<span class="widget-icon"> <i class="fa fa-cube"></i> </span>
					<h2>Alerts Call Count</h2>
					<div class="widget-toolbar hidden-mobile">
						<span><i class="fa fa-location-arrow"></i> Reset</span>
					</div>
				</header>
				
				<div class="jarviswidget-editbox">
					<div>
						<label>Title:</label>
							<input type="text" />
					</div>
				</div>
				<div class="widget-body">
					<div id="Alert-Calls-Line" class="dc-chart">
					</div>
				</div>


			</div>
		</article>
		<article class="col-sm-12 col-md-12 col-lg-6">

			<!-- new widget -->
			<div class="jarviswidget" id="wid-id-107">

				<!-- widget options:
				usage: <div class="jarviswidget" id="wid-id-100" data-widget-editbutton="false">

				data-widget-colorbutton="false"
				data-widget-editbutton="false"
				data-widget-togglebutton="false"
				data-widget-deletebutton="false"
				data-widget-fullscreenbutton="false"
				data-widget-custombutton="false"
				data-widget-collapsed="true"
				data-widget-sortable="false"

				-->

				<header>
					<span class="widget-icon"> <i class="fa fa-cube"></i> </span>
					<h2>Alerts Count Line</h2>
					<div class="widget-toolbar hidden-mobile">
						<span><i class="fa fa-location-arrow"></i> Reset</span>
					</div>
				</header>
				
				<div class="jarviswidget-editbox">
					<div>
						<label>Title:</label>
							<input type="text" />
					</div>
				</div>
				<div class="widget-body">
					<div id="Alert-Duration-Line" class="dc-chart">
					</div>
				</div>


			</div>
		</article>
	</div>
	
<div class = "row">
	<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
		<div class="jarviswidget jarviswidget-color-darken" id="wid-id-108" data-widget-editbutton="false">
					<header>
					<span class="widget-icon"> <i class="fa fa-table"></i> </span>
					<h2>Real Time Triggers </h2>

				</header>

				<!-- widget div-->
				<div class="no-padding">
					<!-- widget edit box -->
					<div class="jarviswidget-editbox">

					</div>
					<!-- end widget edit box -->

					<div class="widget-body">
						<!-- content -->
						<div id="myTabContent" class="tab-content">
							<div class="tab-pane fade active in padding-10 no-padding-bottom" id="s1">
								<div class="row no-space">
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="widget-body no-padding">

											<table id="datatable_fixed_columns" class="table table-striped table-bordered table-hover dc-data-table" width="100%" data-ng-controller="triggerDataCtrl">
			        							<thead>
        											<tr class="header">
            											<th>Alert Time</th>
            											<th>Number</th>
           												<th>Country Name</th>
            											<th>Level</th>
            											<th>Category</th>
														<th>Total Calls</th>
													</tr>
        										</thead>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			
		</div>
	</article>

</div>
</section>

<script type="text/javascript">
//loadScript("js/libs/pageSetup.js");
d3.json("../services/getCallTriggers.xsjs", function(data){
	console.log("Writing Print Filter");
	function print_filter(filter){
		var f=eval(filter);
		if (typeof(f.length) != "undefined") {}else{}
		if (typeof(f.top) != "undefined") {f=f.top(Infinity);}else{}
		if (typeof(f.dimension) != "undefined") {f=f.dimension(function(d) { return "";}).top(Infinity);}else{}
		console.log(filter+"("+f.lngth+") = "+JSON.stringify(f).replace("[","[\n\t").replace(/}\,/g,"},\n\t").replace("]","\n]"));
	}
	
	//var alertCountLine = dc.lineChart("#Alerts-Line");
	var alertCountBar = dc.barChart("#Alerts-Line");
	var alertLevelPi = dc.pieChart("#Alerts-Level-Pi");
	//var alertTypePi = dc.pieChart("#Alerts-Type-Pi");
	var alertCallsLine = dc.lineChart("#Alert-Calls-Line");
	var alertDurationLine = dc.lineChart("#Alert-Duration-Line");
	//var alertLevelOrg = dc.rowChart("#Alerts-Level-Pi");
	var alertTypeOrg = dc.rowChart("#Alerts-Type-Pi");
	
	console.log("Declaring Data");
	
	/*var data = 	[{"cd":"2014-09-04T01:00:00.000Z","ph":123,"level":"L1","type":"INT-IN",cnt:1,"ccname":"Saint Helena","ccshname":"SHN ","totcalls":10,"totdur":308},
				{"cd":"2014-09-04T02:00:00.000Z","ph":456,"level":"L1","type":"INT-OUT",cnt:1,"ccname":"Faroe Islands","ccshname":"FRO ","totcalls":24,"totdur":241},
				{"cd":"2014-09-04T02:00:00.000Z","ph":789,"level":"L2","type":"DOMESTIC",cnt:1,"ccname":"Monaco","ccshname":"MCO ","totcalls":35,"totdur":701},
				{"cd":"2014-09-04T02:00:00.000Z","ph":246,"level":"L2","type":"INT-IN",cnt:1,"ccname":"Latvia","ccshname":"LVA ","totcalls":38,"totdur":832},
				{"cd":"2014-09-04T02:00:00.000Z","ph":123,"level":"L2","type":"INT-OUT",cnt:1,"ccname":"Gibraltar","ccshname":"GIB ","totcalls":33,"totdur":343},
				{"cd":"2014-09-04T02:00:00.000Z","ph":804,"level":"L3","type":"DOMESTIC",cnt:1,"ccname":"Iceland","ccshname":"IS ","totcalls":45,"totdur":993},
				{"cd":"2014-09-04T02:00:00.000Z","ph":764,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Tanzania","ccshname":"TZA ","totcalls":75,"totdur":885},
				{"cd":"2014-09-04T02:00:00.000Z","ph":164,"level":"L2","type":"INT-IN",cnt:1,"ccname":"Macedonia","ccshname":"MKD ","totcalls":35,"totdur":154},
				{"cd":"2014-09-04T02:00:00.000Z","ph":746,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Madagascar","ccshname":"MDG ","totcalls":54,"totdur":534},
				{"cd":"2014-09-04T02:00:00.000Z","ph":743,"level":"L2","type":"INT-OUT",cnt:1,"ccname":"British Indian Ocean Territory","ccshname":"IOT ","totcalls":29,"totdur":144},
				{"cd":"2014-09-04T02:00:00.000Z","ph":122,"level":"L2","type":"DOMESTIC",cnt:1,"ccname":"Finland","ccshname":"FIN ","totcalls":31,"totdur":943},
				{"cd":"2014-09-04T03:00:00.000Z","ph":948,"level":"L2","type":"INT-OUT",cnt:1,"ccname":"Finland","ccshname":"FIN ","totcalls":32,"totdur":944},
				{"cd":"2014-09-04T03:00:00.000Z","ph":246,"level":"L1","type":"DOMESTIC",cnt:1,"ccname":"Malta","ccshname":"MLT ","totcalls":15,"totdur":935},
				{"cd":"2014-09-04T04:00:00.000Z","ph":458,"level":"L1","type":"DOMESTIC",cnt:1,"ccname":"Cyprus","ccshname":"CYP ","totcalls":19,"totdur":134},
				{"cd":"2014-09-04T04:00:00.000Z","ph":459,"level":"L1","type":"DOMESTIC",cnt:1,"ccname":"Liechtenstein","ccshname":"LIE ","totcalls":21,"totdur":925},
				{"cd":"2014-09-04T04:00:00.000Z","ph":474,"level":"L2","type":"INT-IN",cnt:1,"ccname":"Kenya","ccshname":"KEN ","totcalls":31,"totdur":433},
				{"cd":"2014-09-04T04:00:00.000Z","ph":844,"level":"L2","type":"INT-OUT",cnt:1,"ccname":"Eritrea","ccshname":"ERI ","totcalls":32,"totdur":924},
				{"cd":"2014-09-04T05:00:00.000Z","ph":234,"level":"L1","type":"INT-OUT",cnt:1,"ccname":"Montenegro","ccshname":"MNE ","totcalls":21,"totdur":224},
				{"cd":"2014-09-04T05:00:00.000Z","ph":345,"level":"L2","type":"DOMESTIC",cnt:1,"ccname":"Rwanda","ccshname":"RWA ","totcalls":34,"totdur":262},
				{"cd":"2014-09-04T05:00:00.000Z","ph":525,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Bulgaria","ccshname":"BGR ","totcalls":63,"totdur":279},
				{"cd":"2014-09-04T05:00:00.000Z","ph":534,"level":"L1","type":"INT-IN",cnt:1,"ccname":"Seychelles","ccshname":"SYC ","totcalls":23,"totdur":181},
				{"cd":"2014-09-04T05:00:00.000Z","ph":324,"level":"L2","type":"DOMESTIC",cnt:1,"ccname":"Malawi","ccshname":"MWI ","totcalls":12,"totdur":553},
				{"cd":"2014-09-04T05:00:00.000Z","ph":564,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Zimbabwe","ccshname":"ZWE ","totcalls":43,"totdur":100},
				{"cd":"2014-09-04T06:00:00.000Z","ph":454,"level":"L1","type":"DOMESTIC",cnt:1,"ccname":"Mozambique","ccshname":"MOZ ","totcalls":22,"totdur":172},
				{"cd":"2014-09-04T06:00:00.000Z","ph":453,"level":"L2","type":"INT-OUT",cnt:1,"ccname":"Luxembourg","ccshname":"LUX ","totcalls":33,"totdur":205},
				{"cd":"2014-09-04T07:00:00.000Z","ph":845,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Botswana","ccshname":"BWA ","totcalls":63,"totdur":189},
				{"cd":"2014-09-04T07:00:00.000Z","ph":245,"level":"L2","type":"DOMESTIC",cnt:1,"ccname":"Zambia","ccshname":"ZMB ","totcalls":31,"totdur":112},
				{"cd":"2014-09-04T07:00:00.000Z","ph":435,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Comoros","ccshname":"COM ","totcalls":51,"totdur":283},
				{"cd":"2014-09-04T07:00:00.000Z","ph":453,"level":"L3","type":"INT-OUT",cnt:1,"ccname":"Somalia","ccshname":"SOM ","totcalls":64,"totdur":204},
				{"cd":"2014-09-04T08:00:00.000Z","ph":589,"level":"L1","type":"INT-IN",cnt:1,"ccname":"Moldova","ccshname":"MDA ","totcalls":11,"totdur":443},
				{"cd":"2014-09-04T08:00:00.000Z","ph":254,"level":"L2","type":"DOMESTIC",cnt:1,"ccname":"Djibouti","ccshname":"DJI ","totcalls":31,"totdur":505},
				{"cd":"2014-09-04T08:00:00.000Z","ph":564,"level":"L3","type":"INT-OUT",cnt:1,"ccname":"Portugal","ccshname":"PRT ","totcalls":51,"totdur":101},
				{"cd":"2014-09-04T08:00:00.000Z","ph":245,"level":"L1","type":"DOMESTIC",cnt:1,"ccname":"Czech Republic","ccshname":"CZE ","totcalls":21,"totdur":443},
				{"cd":"2014-09-04T08:00:00.000Z","ph":456,"level":"L2","type":"INT-IN",cnt:1,"ccname":"Croatia","ccshname":"HRV ","totcalls":33,"totdur":596},
				{"cd":"2014-09-04T08:00:00.000Z","ph":245,"level":"L3","type":"INT-IN",cnt:1,"ccname":"United Arab Emirates","ccshname":"ARE ","totcalls":68,"totdur":345},
				{"cd":"2014-09-04T08:00:00.000Z","ph":676,"level":"L2","type":"INT-OUT",cnt:1,"ccname":"Andorra","ccshname":"AND ","totcalls":31,"totdur":214},
				{"cd":"2014-09-04T08:00:00.000Z","ph":356,"level":"L2","type":"DOMESTIC",cnt:1,"ccname":"Uganda","ccshname":"UGA ","totcalls":31,"totdur":225},
				{"cd":"2014-09-04T10:00:00.000Z","ph":756,"level":"L1","type":"INT-OUT",cnt:1,"ccname":"Ukraine","ccshname":"UKR ","totcalls":21,"totdur":922},
				{"cd":"2014-09-04T10:00:00.000Z","ph":356,"level":"L2","type":"DOMESTIC",cnt:1,"ccname":"Ireland","ccshname":"IRL ","totcalls":32,"totdur":515},
				{"cd":"2014-09-04T10:00:00.000Z","ph":356,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Mayotte","ccshname":"MYT ","totcalls":46,"totdur":255},
				{"cd":"2014-09-04T10:00:00.000Z","ph":546,"level":"L1","type":"DOMESTIC",cnt:1,"ccname":"Aruba","ccshname":"ABW ","totcalls":11,"totdur":183},
				{"cd":"2014-09-04T11:00:00.000Z","ph":905,"level":"L2","type":"INT-OUT",cnt:1,"ccname":"Ethiopia","ccshname":"ETH ","totcalls":30,"totdur":345},
				{"cd":"2014-09-04T11:00:00.000Z","ph":908,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Lesotho","ccshname":"LSO ","totcalls":50,"totdur":345},
				{"cd":"2014-09-04T11:00:00.000Z","ph":609,"level":"L1","type":"INT-OUT",cnt:1,"ccname":"Swaziland","ccshname":"SWZ ","totcalls":20,"totdur":435},
				{"cd":"2014-09-04T11:00:00.000Z","ph":560,"level":"L2","type":"INT-OUT",cnt:1,"ccname":"Lithuania","ccshname":"LTU ","totcalls":30,"totdur":344},
				{"cd":"2014-09-04T11:00:00.000Z","ph":456,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Estonia","ccshname":"EST ","totcalls":50,"totdur":345},
				{"cd":"2014-09-04T11:00:00.000Z","ph":879,"level":"L1","type":"INT-OUT",cnt:1,"ccname":"Belarus","ccshname":"BLR ","totcalls":20,"totdur":34},
				{"cd":"2014-09-04T11:00:00.000Z","ph":345,"level":"L2","type":"DOMESTIC",cnt:1,"ccname":"San Marino","ccshname":"SMR ","totcalls":30,"totdur":345},
				{"cd":"2014-09-04T11:00:00.000Z","ph":985,"level":"L3","type":"INT-IN",cnt:1,"ccname":"Serbia  and Kosovo","ccshname":"SRB ","totcalls":21,"totdur":123},
				{"cd":"2014-09-04T12:00:00.000Z","ph":498,"level":"L1","type":"INT-IN",cnt:1,"ccname":"Slovenia","ccshname":"SVN ","totcalls":21,"totdur":234},
				{"cd":"2014-09-04T12:00:00.000Z","ph":458,"level":"L1","type":"DOMESTIC",cnt:1,"ccname":"Slovakia","ccshname":"SVK ","totcalls":20,"totdur":345},
				{"cd":"2014-09-04T12:00:00.000Z","ph":985,"level":"L2","type":"INT-OUT",cnt:1,"ccname":"Sudan","ccshname":"SDN ","totcalls":33,"totdur":123}
				];*/
	console.log("data from alert custom", data);
	
	var dateArray = [];
	data.forEach(function(a){
		a.dd = new Date(a.tt);
		a.hour = d3.time.minute(a.dd);		
		dateArray.push(a.hour);
		console.log("Wanted to print date")
		a.timeDate = moment(a.hour).format('MMM DD, HH:MM');
		console.log("Hours", a.timeDate);
	});
	
	console.log("Date Array", dateArray);
	var minDate = d3.min(dateArray);
	var maxDate = d3.max(dateArray);
	console.log("Min Date", minDate);
	console.log("Max Date", maxDate);
	
	var alt = crossfilter(data);
	var dateDim = alt.dimension(function(a){
		return a.hour;
	});
	//print_filter(dateDim);
	var alertCount = dateDim.group();
	//print_filter(alertCount);
	
	console.log("What is not working");
	var levDim = alt.dimension(function(b){
		return b.ctanaom;
	});
	//print_filter(levDim);
	var callsLevel = levDim.group();
	//print_filter(callsLevel);
	
	var callsLevelGrp = levDim.group();
	//print_filter("callsLevelGrp");
	
	var typeDim = alt.dimension(function(b){
		return b.ct;
	});
	//print_filter(typeDim);
	var callsType = typeDim.group();
	//print_filter("callsType");
	
	var callsTypeGrp = typeDim.group();
	print_filter("callsTypeGrp");
	
	var totCalls = dateDim.group().reduceSum(function(a){
		return a.tc;
	});
	
	var totDuration = dateDim.group();
	
	
	console.log("Going to Plot");
	/*alertCountLine.width(600)
				.height(300)
				.transitionDuration(1000)
				.margins({top: 30, right: 50, bottom: 25, left: 60})
				.dimension(dateDim)
				.mouseZoomable(true)
				.x(d3.time.scale().domain([minDate, maxDate]))
				.round(d3.time.hour.round)
				.xUnits(d3.time.hours)
				.group(alertCount)
				//.centerBar(true)
				.elasticY(true)
				.renderHorizontalGridLines(true)
				//.brushOn(false)
				.colors('red')
				.xAxis();*/
	
	alertCountBar.width(600)
				.height(380)
				.transitionDuration(1000)
				.margins({top: 30, right: 50, bottom: 25, left: 60})
				.mouseZoomable(true)
				//.brushOn(false)
				.dimension(dateDim)
				.x(d3.time.scale().domain([minDate, maxDate]))
				.round(d3.time.minute.round)
				.xUnits(d3.time.minutes)
				.group(alertCount)
				.gap(1)
				.colors('#FF5C33')
				.renderlet(function(chart) {
					chart.selectAll('rect').on("click", function(d) {
						console.log("click!", d);
					});
				});
	
	
	alertLevelPi.width(300)
				.height(140)
				.slicesCap(10)
				.innerRadius(30)
				.dimension(levDim)
				//.colors(['red', 'green', 'yellow'])
				.group(callsLevelGrp)
				.legend(dc.legend());
	
	/*alertLevelOrg.width(300)
				.height(150)
				.dimension(levDim)
				.group(callsLevelGrp)
				.colors(['#D462FF', '#736AFF', '#92C7C7', '#595454', '#E3319D', '#FF00FF', '#666362', '#E56E94', '#3090C7', '#8B31C7', '#C8BBBE', '#342D7E', '#646060', '#2554C7', '#E238EC', '#1569C7', '#CFECEC', '#544E4F', '#728FCE', '#3EA99F', '#7F38EC', '#737CA1', '#7D0541', '#8EEBEC', '#736F6E', '#4C4646', '#6A287E', '#565051', '#46C7C7', '#F6358A', '#1589FF', '#7FFFD4', '#810541', '#38ACEC', '#4A4344', '#3BB9FF', '#4E4848', '#9AFEFF', '#C031C7', '#2B60DE', '#B93B8F', '#6D7B8D', '#15317E', '#8467D7', '#737CA1', '#41627E', '#EBDDE2', '#4863A0', '#5F5A59', '#BDEDFF', '#C6DEFF', '#504A4B', '#667C26', '#726E6D', '#348781', '#48CCCD', '#7E587E', '#307D7E', '#6698FF', '#306EFF', '#153E7E', '#357EC7', '#646D7E', '#AFDCEC', '#254117', '#A23BEC', '#CA226B', '#50EBEC', '#C12283', '#4E9258', '#B7CEEC', '#B4CFEC', '#F0F8FF', '#347235', '#E9CFEC', '#E4287C', '#FCDFFF', '#95B9C7', '#157DEC', '#6D6968', '#6960EC', '#41383C', '#78c7c7', '#7D053F', '#6E6A6B', '#F535AA', '#79BAEC', '#C6AEC7', '#D2B9D3', '#B048B5', '#7D1B7E', '#87AFC7', '#2B3856', '#56A5EC', '#657383', '#82CAFF', '#488AC7', '#F9B7FF', '#F52887', '#747170', '#F433FF', '#9172EC', '#F6358A', '#43C6DB', '#57FEFF', '#52F3FF', '#82CAFA', '#25587E', '#43BFC7', '#6C2DC7', '#616D7E', '#4C7D7E', '#F0FFFF', '#617C58', '#566D7E', '#8D38C9', '#7D0552', '#B041FF', '#C45AEC', '#306754', '#98AFC7', '#347C2C', '#151B54', '#4E387E', '#2B547E', '#A0CFEC', '#806D7E', '#717D7D', '#800517', '#00FFFF', '#E4317F', '#696565', '#461B7E', '#5E7D7E', '#D16587', '#2B65EC', '#463E3F', '#4EE2EC', '#E3E4FA', '#ADDFFF', '#FDEEF4', '#5E767E', '#4C787E', '#387C44', '#E0FFFF', '#5E5A80', '#C38EC7', '#C2DFFF', '#893BFF', '#7A5DC7', '#C12869', '#4E8975', '#463E41', '#571B7E', '#8E35EF', '#151B8D', '#842DCE', '#F778A1', '#E6A9EC', '#77BFC7', '#625D5D', '#659EC7', '#9E7BFF', '#25383C', '#C25A7C', '#3B9C9C', '#5CB3FF', '#A74AC7', '#7E354D', '#5C5858', '#AFC7C7', '#C12267'])
			    .gap(1)
			    .renderLabel(true)
			    .renderTitle(true)
			    .xAxis().ticks(4);*/
	
	alertTypeOrg.width(300)
				.height(140)
				.dimension(typeDim)
				.group(callsTypeGrp)
				//.colors(['red', 'green', 'yellow', 'blue'])
				.gap(1)
			    .renderLabel(true)
			    .renderTitle(true)
			    .xAxis().ticks(4);
	
				
	/*alertTypePi.width(300)
				.height(150)
				.slicesCap(10)
				.innerRadius(30)
				.dimension(typeDim)
				.group(callsTypeGrp)
				.legend(dc.legend());*/
	
	alertCallsLine.width(540)
				.height(270)
				.transitionDuration(1000)
				.margins({top: 30, right: 50, bottom: 25, left: 60})
				.dimension(dateDim)
				.mouseZoomable(true)
				.x(d3.time.scale().domain([minDate, maxDate]))
				.round(d3.time.hour.round)
				.xUnits(d3.time.hours)
				.group(totCalls)
				//.centerBar(true)
				.elasticY(true)
				.renderHorizontalGridLines(true)
				//.brushOn(false)
				.colors('red')
				.xAxis();
	
	alertDurationLine.width(540)
				.height(270)
				.transitionDuration(1000)
				.margins({top: 30, right: 50, bottom: 25, left: 60})
				.dimension(dateDim)
				.mouseZoomable(true)
				.x(d3.time.scale().domain([minDate, maxDate]))
				.round(d3.time.hour.round)
				.xUnits(d3.time.hours)
				.group(totDuration)
				//.centerBar(true)
				.elasticY(true)
				.renderHorizontalGridLines(true)
				//.brushOn(false)
				.colors('red')
				.xAxis();
	dc.dataTable(".dc-data-table")
				.dimension(dateDim)
                .group(function (d) {
                    return d.ct;
                })
				.size(600)
				.columns([
					function (d) {
						return d.timeDate;
					},
					function (d) {
						return d.pn;
					},
					function (d) {
						return d.cn;
					},
					function (d) {
						return d.ctanaoom;
					},
					function (d) {
						return d.ct;
					},
					function (d) {
						return d.tc;
					}
				])
				.sortBy(function (d) {
					return d.ctanaom;
				})
				.order(d3.ascending)
				.renderlet(function (table) {
					table.selectAll(".dc-table-group").classed("info", true);
				});
				
	dc.renderAll();
	console.log("Plotting Done");
})
</script>

